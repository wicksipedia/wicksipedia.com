@import "tailwindcss";
@import "./typography.css";

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

:root,
html[data-theme="light"] {
  --background: #faf9f6;
  --foreground: #1a1a1a;
  --accent: #d4550a;
  --accent-2: #16a34a;
  --muted: #e8e5df;
  --border: #d6d3cc;
  --hero-bg: #DAD9DB;
  --hero-text: #282728;
  --hero-text-muted: rgba(40, 39, 40, 0.7);
  --hero-accent: #d4550a;
  --hero-social: rgba(40, 39, 40, 0.75);
}

html[data-theme="dark"] {
  --background: #0f1117;
  --foreground: #e8e6e3;
  --accent: #ff7a1a;
  --accent-2: #34d399;
  --muted: #1e2130;
  --border: #2a2d3a;
  --hero-bg: #1a1d2a;
  --hero-text: #e8e6e3;
  --hero-text-muted: rgba(232, 230, 227, 0.7);
  --hero-accent: #ff7a1a;
  --hero-social: rgba(232, 230, 227, 0.75);
}

@theme inline {
  --font-app: var(--font-google-sans-code);
  --font-prose: var(--font-source-serif);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-accent: var(--accent);
  --color-accent-2: var(--accent-2);
  --color-muted: var(--muted);
  --color-border: var(--border);
  --color-hero-bg: var(--hero-bg);
  --color-hero-text: var(--hero-text);
  --color-hero-text-muted: var(--hero-text-muted);
  --color-hero-accent: var(--hero-accent);
  --color-hero-social: var(--hero-social);
}

@layer base {
  * {
    @apply border-border outline-accent/75;
    scrollbar-width: thin;
    scrollbar-color: var(--accent) transparent;
  }
  html {
    @apply overflow-y-scroll scroll-smooth;
  }
  body {
    @apply flex min-h-svh flex-col bg-background font-app text-foreground selection:bg-accent/90 selection:text-white;
  }
  a,
  button {
    @apply outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dashed;
  }
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
}

/* ===== Layout Utilities ===== */

@utility max-w-app {
  @apply max-w-4xl xl:max-w-5xl;
}

@utility app-layout {
  @apply mx-auto w-full max-w-app px-4;
}

/* Source: https://piccalil.li/blog/a-more-modern-css-reset/ */
:target {
  scroll-margin-block: 1rem;
}

/* ===== Keyframe Animations ===== */

@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

@keyframes dot-bounce {
  0%, 100% {
    transform: translateY(0) scale(1);
    animation-timing-function: cubic-bezier(0.35, 0, 0.65, 1);
  }
  50% {
    transform: translateY(-6px) scale(1.1);
    animation-timing-function: cubic-bezier(0.33, 0, 0.67, 1);
  }
}

@keyframes dot-squish {
  0%, 100% { transform: translateY(0) scaleX(1) scaleY(1); }
  15% { transform: translateY(0) scaleX(1.3) scaleY(0.7); }
  30% { transform: translateY(-10px) scaleX(0.85) scaleY(1.15); }
  50% { transform: translateY(-14px) scaleX(1) scaleY(1); }
  70% { transform: translateY(-10px) scaleX(0.85) scaleY(1.15); }
  85% { transform: translateY(0) scaleX(1.25) scaleY(0.75); }
}

@keyframes dot-shadow {
  0%, 100% { transform: translateX(-50%) scaleX(1); opacity: 0.3; }
  50% { transform: translateX(-50%) scaleX(0.5); opacity: 0.1; }
}

@keyframes dot-shadow-squish {
  0%, 100% { transform: translateX(-50%) scaleX(1); opacity: 0.3; }
  15% { transform: translateX(-50%) scaleX(1.4); opacity: 0.35; }
  50% { transform: translateX(-50%) scaleX(0.4); opacity: 0.05; }
  85% { transform: translateX(-50%) scaleX(1.4); opacity: 0.35; }
}

/* ===== Animation Utilities ===== */

@utility animate-reveal {
  animation: fade-in-up 0.5s cubic-bezier(0.22, 1, 0.36, 1) both;
}

@utility animate-reveal-delay-1 {
  animation: fade-in-up 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.1s both;
}

@utility animate-reveal-delay-2 {
  animation: fade-in-up 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.2s both;
}

@utility animate-reveal-delay-3 {
  animation: fade-in-up 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.3s both;
}

/* ===== Text Utilities ===== */

@utility text-gradient {
  color: var(--accent);
  -webkit-text-fill-color: var(--accent);
}

/* ===== Accent line at top of viewport ===== */
body::before {
  content: "";
  @apply fixed top-0 left-0 right-0 z-45 h-[3px] pointer-events-none;
  background: linear-gradient(90deg, transparent, var(--accent), transparent);
}

/* ===== Hero avatar responsive sizes ===== */
/* These use raw CSS because they need custom breakpoints (480px) and
   complex object-fit rules that are cleaner than long Tailwind strings */

.hero-avatar {
  @apply block object-cover object-top size-[140px] rounded-full mx-auto;
}

@media (min-width: 480px) {
  .hero-avatar { @apply size-[160px]; }
}

@media (min-width: 768px) {
  .hero-avatar {
    @apply w-[320px] h-[360px] rounded-none mx-0 -mb-10;
  }
}

@media (min-width: 1024px) {
  .hero-avatar {
    @apply w-[420px] h-[460px] -mb-[50px];
  }
}

@media (min-width: 1280px) {
  .hero-avatar {
    @apply w-[480px] h-[500px] -mb-[60px];
  }
}
